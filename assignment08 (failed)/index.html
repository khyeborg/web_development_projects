<!DOCTYPE html>
<html>
  <head>
    <title>Assigment 08</title>
  </head>
  <body>

    <h1>Pokemon + A-Frame API</h1>

    <!-- import jQuery -->
    <script src="js/jquery-3.3.1.min.js"></script> 

    <!-- P5 libraries -->
    <script language="javascript" type="text/javascript" src="../libraries/p5.js"></script>
    <script language="javascript" type="text/javascript" src="../libraries/p5.dom.min.js"></script>

    <!-- A-Frame libraries -->
    <script language="javascript" type="text/javascript" src="../libraries/aframe.min.js"></script>

    <!-- AFrameP5 library -->
    <script language="javascript" type="text/javascript" src="../libraries/aframep5.js"></script>

    <!-- P5 Sketch -->
    <script language="javascript" type="text/javascript" src="Pokemon.js"></script>
    <!-- <script language="javascript" type="text/javascript" src="sketch.js"></script> -->

    <input type="text" id="search_tab"><button id="submit">Search</button>
    <br>

    <div id="results">
      <h2 id="pokemon_name"></h2>
      <img id="pokemon_image">
    </div>
    <br>
    <div id="player"></div>

    <a-scene id="VRScene">
      <a-assets id="VRAssets">

        <img id="floor_color" src="images/floor_color.png">

        <img id="poliwag_face" src="images/poliwag/poliwag_face.png">
        <img id="poliwag_face_blink" src="images/poliwag/poliwag_face_blink.png">
        <img id="poliwag_mouth" src="images/poliwag/poliwag_mouth.png">

        <img id="diglett_face" src="images/diglett/diglett_face.png">
        <img id="diglett_face_blink" src="images/diglett/diglett_face_blink.png">
        <img id="diglett_nose" src="images/diglett/diglett_nose.png">

        <img id="bulbasaur_face" src="images/bulbasaur/bulbasaur_face.png">
        <img id="bulbasaur_face_blink" src="images/bulbasaur/bulbasaur_face_blink.png">
        <img id="bulbasaur_face_top" src="images/bulbasaur/bulbasaur_face_top.png">
        <img id="bulbasaur_body" src="images/bulbasaur/bulbasaur_body.png">
        <img id="bulbasaur_seed_side" src="images/bulbasaur/bulbasaur_seed_side.png">
        <img id="bulbasaur_seed_side2" src="images/bulbasaur/bulbasaur_seed_side2.png">
        <img id="bulbasaur_seed_top" src="images/bulbasaur/bulbasaur_seed_top.png">
        <img id="bulbasaur_seedtop_side" src="images/bulbasaur/bulbasaur_seedtop_side.png">
        <img id="bulbasaur_seedtop_top" src="images/bulbasaur/bulbasaur_seedtop_top.png">

        <img id="magnemite_face" src="images/magnemite/magnemite_face.png">
        <img id="magnemite_face_blink" src="images/magnemite/magnemite_face_blink.png">
        <img id="magnemite_face_screw" src="images/magnemite/magnemite_face_screw.png">
        <img id="magnemite_face_screwtop_box" src="images/magnemite/magnemite_face_screwtop_box.png">
        <img id="magnemite_top_screw" src="images/magnemite/magnemite_top_screw.png">

        <img id="pikachu_face" src="images/pikachu/pikachu_face.png">
        <img id="pikachu_face_blink" src="images/pikachu/pikachu_face_blink.png">
        <img id="pikachu_top" src="images/pikachu/pikachu_top.png">
        <img id="pikachu_left" src="images/pikachu/pikachu_left.png">
        <img id="pikachu_right" src="images/pikachu/pikachu_right.png">

        <img id="slowpoke_face" src="images/slowpoke/slowpoke_face.png">
        <img id="slowpoke_face_blink" src="images/slowpoke/slowpoke_face_blink.png">
        <img id="slowpoke_mouth_top" src="images/slowpoke/slowpoke_mouth_top.png">
        <img id="slowpoke_mouth_bottom" src="images/slowpoke/slowpoke_mouth_bottom.png">
        <img id="slowpoke_ear_left" src="images/slowpoke/slowpoke_ear_left.png">
        <img id="slowpoke_ear_right" src="images/slowpoke/slowpoke_ear_right.png">

        <img id="shiny_poliwag_face" src="images/shiny_poliwag/shiny_poliwag_face.png">
        <img id="shiny_poliwag_face_blink" src="images/shiny_poliwag/shiny_poliwag_face_blink.png">
        <img id="shiny_poliwag_mouth" src="images/shiny_poliwag/shiny_poliwag_mouth.png">

        <img id="shiny_diglett_face" src="images/shiny_diglett/shiny_diglett_face.png">
        <img id="shiny_diglett_face_blink" src="images/shiny_diglett/shiny_diglett_face_blink.png">
        <img id="shiny_diglett_nose" src="images/shiny_diglett/shiny_diglett_nose.png">

        <img id="shiny_bulbasaur_face" src="images/shiny_bulbasaur/shiny_bulbasaur_face.png">
        <img id="shiny_bulbasaur_face_blink" src="images/shiny_bulbasaur/shiny_bulbasaur_face_blink.png">
        <img id="shiny_bulbasaur_face_top" src="images/shiny_bulbasaur/shiny_bulbasaur_face_top.png">
        <img id="shiny_bulbasaur_body" src="images/shiny_bulbasaur/shiny_bulbasaur_body.png">
        <img id="shiny_bulbasaur_seed_side" src="images/shiny_bulbasaur/shiny_bulbasaur_seed_side.png">
        <img id="shiny_bulbasaur_seed_side2" src="images/shiny_bulbasaur/shiny_bulbasaur_seed_side2.png">
        <img id="shiny_bulbasaur_seed_top" src="images/shiny_bulbasaur/shiny_bulbasaur_seed_top.png">
        <img id="shiny_bulbasaur_seedtop_side" src="images/shiny_bulbasaur/shiny_bulbasaur_seedtop_side.png">
        <img id="shiny_bulbasaur_seedtop_top" src="images/shiny_bulbasaur/shiny_bulbasaur_seedtop_top.png">

        <img id="shiny_magnemite_face" src="images/shiny_magnemite/shiny_magnemite_face.png">
        <img id="shiny_magnemite_face_blink" src="images/shiny_magnemite/shiny_magnemite_face_blink.png">
        <img id="shiny_magnemite_face_screw" src="images/shiny_magnemite/shiny_magnemite_face_screw.png">
        <img id="shiny_magnemite_face_screwtop_box" src="images/shiny_magnemite/shiny_magnemite_face_screwtop_box.png">
        <img id="shiny_magnemite_top_screw" src="images/shiny_magnemite/shiny_magnemite_top_screw.png">

        <img id="shiny_pikachu_face" src="images/shiny_pikachu/shiny_pikachu_face.png">
        <img id="shiny_pikachu_face_blink" src="images/shiny_pikachu/shiny_pikachu_face_blink.png">
        <img id="shiny_pikachu_top" src="images/shiny_pikachu/shiny_pikachu_top.png">
        <img id="shiny_pikachu_left" src="images/shiny_pikachu/shiny_pikachu_left.png">
        <img id="shiny_pikachu_right" src="images/shiny_pikachu/shiny_pikachu_right.png">

        <img id="shiny_slowpoke_face" src="images/shiny_slowpoke/shiny_slowpoke_face.png">
        <img id="shiny_slowpoke_face_blink" src="images/shiny_slowpoke/shiny_slowpoke_face_blink.png">
        <img id="shiny_slowpoke_mouth_top" src="images/shiny_slowpoke/shiny_slowpoke_mouth_top.png">
        <img id="shiny_slowpoke_mouth_bottom" src="images/shiny_slowpoke/shiny_slowpoke_mouth_bottom.png">
        <img id="shiny_slowpoke_ear_left" src="images/shiny_slowpoke/shiny_slowpoke_ear_left.png">
        <img id="shiny_slowpoke_ear_right" src="images/shiny_slowpoke/shiny_slowpoke_ear_right.png">

        <a-asset id="egg_obj" src="egg/tinker.obj"></a-asset>
        <a-asset id="egg_mtl" src="egg/obj.mtl"></a-asset>

      </a-assets>

      <!-- define the sky for this scene -->
      <!-- <a-sky id="theSky" src="#sky1" color="rgb(255,255,255)"></a-sky> -->
    </a-scene>

    <script>

      $(document).ready(function() {

      	var pokemonArray = ["bulbasaur", "diglett", "magnemite", "pikachu", "poliwag", "slowpoke"];
      	var success = false;

      	document.getElementById('submit').onclick = function() {

      		var search = document.getElementById('search_tab').value;

      		$.ajax({

	            url: 'https://pokeapi.co/api/v2/pokemon/' + search,
	            success: function(data, status) {

	            	// set the results panel to hold our custom info
	            	document.getElementById('pokemon_name').innerHTML = data.name;
	            	document.getElementById('pokemon_image').src = data.sprites.front_default;

	            	if (pokemonArray.includes(search)) {

	              		$.ajax({

                			url: 'https://i6.cims.nyu.edu/~kbl274/webdev/libraries/p5.js',
                			success: function(data, status) {
                				$.ajax({

		                			url: 'https://i6.cims.nyu.edu/~kbl274/webdev/libraries/p5.dom.min.js',
		                			success: function(data, status) {
		                				$.ajax({

				                			url: 'https://i6.cims.nyu.edu/~kbl274/webdev/libraries/aframe.min.js',
				                			success: function(data, status) {
				                				$.ajax({

						                			url: 'https://i6.cims.nyu.edu/~kbl274/webdev/libraries/aframep5.js',
						                			success: function(data, status) {
						                				console.log("here");

						                				var world;
														var pokemons = [];
														var boxOpacity = 0;
														var scaleFactor = 1.2;
														var xConstrain = 20 * scaleFactor, zConstrain = 20 * scaleFactor; 
														var startRotation = 0;
														var turnAmount = 0.8;
														var shinyChanceNum = 1;
														var poliwagShadow = [83, 131, 197], diglettShadow = [0, 0, 0], bulbasaurShadow = [116, 178, 108], magnemiteShadow = [0, 0, 0], pikachuShadow = [0, 0, 0], slowpokeShadow = [0, 0, 0];
														var drawShadow = false;
														//var numberOfPokemons = 12;

														// 3D models
														var egg, eggScale = 0.005;

														// lay babies
														// var layBabiesTimeLower = 500, layBabiesTimeUpper = 600;
														var layBabiesTimeLower = 1000, layBabiesTimeUpper = 2000;
														var pregnantTime = 500;
														
						                				// frameRate(50);
        
												        // construct the A-Frame world
												        world = new World('VRScene');
												        world.setFlying(true);
												        world.setUserPosition(3.4676121223873246, 0.6458707955548807, 7.334448788186884);
												        // world.setUserPosition(0.5984239299672317, 2.3754209416864414, 8.413249113497988);
												        // world.setUserPosition(0.2611772087318868, 9.198350431525817, 32.500726791711);

												        var floor = new Plane({
												            x: 0, y: 0, width: 100, height: 100, rotationX: -90, 
												            //red: 0, green: 0, blue: 255,
												            asset: "floor_color",
												            side: "double"
												        });

												        // instantiate Pokemon objects and add it to the pokemons array
												        pokemons.push(new Pokemon("magnemite", magnemiteShadow, -2, 0.5, 3.7, 100));
												        pokemons.push(new Pokemon("magnemite", magnemiteShadow, -1, 0.5, 3.7, 1));
												        pokemons.push(new Pokemon("diglett", diglettShadow, 0, 0.35, 3.7, 100));
												        pokemons.push(new Pokemon("diglett", diglettShadow, 1, 0.35, 3.7, 1));
												        pokemons.push(new Pokemon("poliwag", poliwagShadow, 2, 0.3, 3.7, 100));
												        pokemons.push(new Pokemon("poliwag", poliwagShadow, 3, 0.3, 3.7, 1));
												        pokemons.push(new Pokemon("bulbasaur", bulbasaurShadow, 4, 0.25, 4, 100));
												        pokemons.push(new Pokemon("bulbasaur", bulbasaurShadow, 5, 0.25, 4, 1));
												        pokemons.push(new Pokemon("pikachu", pikachuShadow, 6, 0.295, 4, 100));
												        pokemons.push(new Pokemon("pikachu", pikachuShadow, 7, 0.295, 4, 1));
												        pokemons.push(new Pokemon("slowpoke", slowpokeShadow, 8, 0.15, 4, 100));
												        pokemons.push(new Pokemon("slowpoke", slowpokeShadow, 9, 0.15, 4, 1));
						                			}

						                		});
				                			}

				                		});
		                			}

		                		});
                			}

                		});
	            	}
	            }

	        });

	        if (success === true) {

	        }

      	}
        
      }); 

    </script>


  </body>
</html>
